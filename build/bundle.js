var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let l,c;function a(t,e){return l||(l=document.createElement("a")),l.href=e,t===l.href}function i(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function u(t,e,n){return t.set(n),e}function d(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode.removeChild(t)}function g(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function m(){return p(" ")}function v(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function k(t,e,n){t.classList[n?"add":"remove"](e)}function y(t){c=t}const w=[],x=[],j=[],_=[],E=Promise.resolve();let q=!1;function B(t){j.push(t)}const z=new Set;let C=0;function S(){const t=c;do{for(;C<w.length;){const t=w[C];C++,y(t),M(t.$$)}for(y(null),w.length=0,C=0;x.length;)x.pop()();for(let t=0;t<j.length;t+=1){const e=j[t];z.has(e)||(z.add(e),e())}j.length=0}while(w.length);for(;_.length;)_.pop()();q=!1,z.clear(),y(t)}function M(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(B)}}const N=new Set;let A;function L(){A={r:0,c:[],p:A}}function O(){A.r||o(A.c),A=A.p}function P(t,e){t&&t.i&&(N.delete(t),t.i(e))}function T(t,e,n,o){if(t&&t.o){if(N.has(t))return;N.add(t),A.c.push((()=>{N.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function R(t,e){t.d(1),e.delete(t.key)}function U(t,e){T(t,1,1,(()=>{e.delete(t.key)}))}function H(t,e,n,o,s,r,l,c,a,i,u,d){let f=t.length,h=r.length,g=f;const p={};for(;g--;)p[t[g].key]=g;const m=[],v=new Map,$=new Map;for(g=h;g--;){const t=d(s,r,g),c=n(t);let a=l.get(c);a?o&&a.p(t,e):(a=i(c,t),a.c()),v.set(c,m[g]=a),c in p&&$.set(c,Math.abs(g-p[c]))}const b=new Set,k=new Set;function y(t){P(t,1),t.m(c,u),l.set(t.key,t),u=t.first,h--}for(;f&&h;){const e=m[h-1],n=t[f-1],o=e.key,s=n.key;e===n?(u=e.first,f--,h--):v.has(s)?!l.has(o)||b.has(o)?y(e):k.has(s)?f--:$.get(o)>$.get(s)?(k.add(o),y(e)):(b.add(s),f--):(a(n,l),f--)}for(;f--;){const e=t[f];v.has(e.key)||a(e,l)}for(;h;)y(m[h-1]);return m}function D(t){t&&t.c()}function F(t,n,r,l){const{fragment:c,on_mount:a,on_destroy:i,after_update:u}=t.$$;c&&c.m(n,r),l||B((()=>{const n=a.map(e).filter(s);i?i.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(B)}function G(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function I(t,e){-1===t.$$.dirty[0]&&(w.push(t),q||(q=!0,E.then(S)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function J(e,s,r,l,a,i,u,d=[-1]){const f=c;y(e);const g=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(f?f.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:s.target||f.$$.root};u&&u(g.root);let p=!1;if(g.ctx=r?r(e,s.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return g.ctx&&a(g.ctx[t],g.ctx[t]=s)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](s),p&&I(e,t)),n})):[],g.update(),p=!0,o(g.before_update),g.fragment=!!l&&l(g.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);g.fragment&&g.fragment.l(t),t.forEach(h)}else g.fragment&&g.fragment.c();s.intro&&P(e.$$.fragment),F(e,s.target,s.anchor,s.customElement),S()}y(f)}class K{$destroy(){G(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Q=[];function V(e,n=t){let o;const s=new Set;function l(t){if(r(e,t)&&(e=t,o)){const t=!Q.length;for(const t of s)t[1](),Q.push(t,e);if(t){for(let t=0;t<Q.length;t+=2)Q[t][0](Q[t+1]);Q.length=0}}}return{set:l,update:function(t){l(t(e))},subscribe:function(r,c=t){const a=[r,c];return s.add(a),1===s.size&&(o=n(l)||t),r(e),()=>{s.delete(a),0===s.size&&(o(),o=null)}}}}const W=(X="https://api.tzkt.io/v1",async(t,e={})=>await fetch(`${X}${t}?`+new URLSearchParams(e)));var X;const Y=V(window.location.hash);Y.subscribe((t=>{window.location.hash=t})),window.addEventListener("hashchange",(()=>{Y.set(window.location.hash)}));const Z=V([]);W("/blocks/count").then((t=>t.text())).then((t=>{Promise.all([...Array(20).keys()].map((e=>W("/blocks/"+(Number(t)-e-1),{operations:!0}).then((t=>t.json()))))).then((t=>Z.update((e=>[...t.reverse(),...e]))))}));const tt=(new signalR.HubConnectionBuilder).withUrl("https://api.tzkt.io/v1/events").build();async function et(){await tt.start(),await tt.invoke("SubscribeToBlocks")}function nt(t,e,n){const o=t.slice();return o[5]=e[n],o}function ot(t){let e,n,o,s,r,l,c=t[5]+"";function a(){return t[4](t[5])}return{c(){e=g("li"),n=g("button"),o=p(c),s=m(),$(e,"class","svelte-kqj64d")},m(t,c){f(t,e,c),d(e,n),d(n,o),d(e,s),r||(l=v(n,"click",a),r=!0)},p(e,n){t=e,2&n&&c!==(c=t[5]+"")&&b(o,c)},d(t){t&&h(e),r=!1,l()}}}function st(e){let n,o,s,r,l,c,a,i,u,v,k,y,w=(e[2].at(-1)?.level||"loading...")+"",x=Object.keys(e[1]),j=[];for(let t=0;t<x.length;t+=1)j[t]=ot(nt(e,x,t));return{c(){n=g("header"),o=g("div"),s=g("div"),r=g("div"),r.textContent="tezos explorer",l=m(),c=g("div"),a=p("prev. block level: "),i=p(w),u=m(),v=g("nav"),k=g("ul");for(let t=0;t<j.length;t+=1)j[t].c();$(r,"class","svelte-kqj64d"),$(c,"class","svelte-kqj64d"),$(k,"class","svelte-kqj64d"),$(v,"class","navigation svelte-kqj64d"),$(s,"class","header-inner svelte-kqj64d"),$(s,"style",y=`height: ${e[0]}`),$(o,"class","container"),$(n,"class","svelte-kqj64d")},m(t,e){f(t,n,e),d(n,o),d(o,s),d(s,r),d(s,l),d(s,c),d(c,a),d(c,i),d(s,u),d(s,v),d(v,k);for(let t=0;t<j.length;t+=1)j[t].m(k,null)},p(t,[e]){if(4&e&&w!==(w=(t[2].at(-1)?.level||"loading...")+"")&&b(i,w),10&e){let n;for(x=Object.keys(t[1]),n=0;n<x.length;n+=1){const o=nt(t,x,n);j[n]?j[n].p(o,e):(j[n]=ot(o),j[n].c(),j[n].m(k,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=x.length}1&e&&y!==(y=`height: ${t[0]}`)&&$(s,"style",y)},i:t,o:t,d(t){t&&h(n),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(j,t)}}}function rt(t,e,n){let o,s;i(t,Z,(t=>n(2,o=t))),i(t,Y,(t=>n(3,s=t)));let{height:r="60px"}=e,{routes:l}=e;return t.$$set=t=>{"height"in t&&n(0,r=t.height),"routes"in t&&n(1,l=t.routes)},[r,l,o,s,t=>u(Y,s=t,s)]}tt.onclose(et),tt.on("blocks",(t=>{if(console.log(t),t.data)for(const e of t.data)console.log(Number(e.level)),W(`/blocks/${Number(e.level)}`,{operations:!0}).then((t=>t.json())).then((t=>{Z.update((e=>{const n=[...e,t];return n.slice(n.length-20)}))}))})),et();class lt extends K{constructor(t){super(),J(this,t,rt,st,r,{height:0,routes:1})}}function ct(t,e,n){const o=t.slice();return o[3]=e[n],o}function at(t){let e,n=[],o=new Map,s=t[1].transactions.sort(pt).sort(mt);const r=t=>t[3].id;for(let e=0;e<s.length;e+=1){let l=ct(t,s,e),c=r(l);o.set(c,n[e]=ft(c,l))}return{c(){e=g("div");for(let t=0;t<n.length;t+=1)n[t].c();$(e,"class","block-body")},m(t,o){f(t,e,o);for(let t=0;t<n.length;t+=1)n[t].m(e,null)},p(t,l){2&l&&(s=t[1].transactions.sort(pt).sort(mt),n=H(n,l,r,1,t,s,o,e,R,ft,null,ct))},d(t){t&&h(e);for(let t=0;t<n.length;t+=1)n[t].d()}}}function it(t){let e,n,o,s=t[3].parameter.entrypoint+"";return{c(){e=g("div"),n=p(s),o=p("()")},m(t,s){f(t,e,s),d(e,n),d(e,o)},p(t,e){2&e&&s!==(s=t[3].parameter.entrypoint+"")&&b(n,s)},d(t){t&&h(e)}}}function ut(t){let e,n,o=t[3].amount/1e6+"";return{c(){e=g("div"),n=p(o)},m(t,o){f(t,e,o),d(e,n)},p(t,e){2&e&&o!==(o=t[3].amount/1e6+"")&&b(n,o)},d(t){t&&h(e)}}}function dt(t){let e,n,o,s,r=t[3].amount+"";return{c(){e=g("div"),e.textContent="with",n=m(),o=g("div"),s=p(r)},m(t,r){f(t,e,r),f(t,n,r),f(t,o,r),d(o,s)},p(t,e){2&e&&r!==(r=t[3].amount+"")&&b(s,r)},d(t){t&&h(e),t&&h(n),t&&h(o)}}}function ft(t,e){let n,o,s,r,l,c,a,i,u,v,y,w,x=e[3].hash+"",j=(e[3].sender.alias||gt(e[3].sender.address))+"",_=(e[3].target.alias||gt(e[3].target.address))+"",E=e[3].parameter&&it(e);function q(t,e){return t[3].parameter&&t[3].amount?dt:t[3].amount?ut:void 0}let B=q(e),z=B&&B(e);return{key:t,first:null,c(){n=g("div"),o=g("div"),s=p(x),r=m(),l=g("div"),c=p(j),a=m(),i=g("div"),u=p(_),v=m(),E&&E.c(),y=m(),z&&z.c(),w=m(),$(l,"class","sender svelte-jd2agd"),$(i,"class","target svelte-jd2agd"),$(n,"class","transaction svelte-jd2agd"),k(n,"failed","failed"===e[3].status),this.first=n},m(t,e){f(t,n,e),d(n,o),d(o,s),d(n,r),d(n,l),d(l,c),d(n,a),d(n,i),d(i,u),d(n,v),E&&E.m(n,null),d(n,y),z&&z.m(n,null),d(n,w)},p(t,o){e=t,2&o&&x!==(x=e[3].hash+"")&&b(s,x),2&o&&j!==(j=(e[3].sender.alias||gt(e[3].sender.address))+"")&&b(c,j),2&o&&_!==(_=(e[3].target.alias||gt(e[3].target.address))+"")&&b(u,_),e[3].parameter?E?E.p(e,o):(E=it(e),E.c(),E.m(n,y)):E&&(E.d(1),E=null),B===(B=q(e))&&z?z.p(e,o):(z&&z.d(1),z=B&&B(e),z&&(z.c(),z.m(n,w))),2&o&&k(n,"failed","failed"===e[3].status)},d(t){t&&h(n),E&&E.d(),z&&z.d()}}}function ht(e){let n,o,s,r,l,c,i,u,k,y,w,x,j,_,E,q,B,z,C,S,M=e[1].level+"",N=(e[1].baker.alias||"Baker")+"",A=e[1].baker.address+"",L=e[0]?"-":"+",O=e[0]&&at(e);return{c(){n=g("li"),o=g("div"),s=g("div"),r=p(M),l=m(),c=g("img"),u=m(),k=g("div"),y=g("div"),w=p(N),x=m(),j=g("div"),_=p(A),E=m(),q=g("button"),B=p(L),z=m(),O&&O.c(),$(s,"class","level svelte-jd2agd"),a(c.src,i=`https://services.tzkt.io/v1/avatars/${e[1].baker.address}`)||$(c,"src",i),$(c,"width",35),$(c,"height",35),$(c,"alt",""),$(c,"class","svelte-jd2agd"),$(j,"class","baker-address svelte-jd2agd"),$(k,"class","svelte-jd2agd"),$(q,"class","open-btn svelte-jd2agd"),$(o,"class","block-head svelte-jd2agd"),$(n,"class","block svelte-jd2agd")},m(t,a){f(t,n,a),d(n,o),d(o,s),d(s,r),d(o,l),d(o,c),d(o,u),d(o,k),d(k,y),d(y,w),d(k,x),d(k,j),d(j,_),d(o,E),d(o,q),d(q,B),d(n,z),O&&O.m(n,null),C||(S=v(q,"click",e[2]),C=!0)},p(t,[e]){2&e&&M!==(M=t[1].level+"")&&b(r,M),2&e&&!a(c.src,i=`https://services.tzkt.io/v1/avatars/${t[1].baker.address}`)&&$(c,"src",i),2&e&&N!==(N=(t[1].baker.alias||"Baker")+"")&&b(w,N),2&e&&A!==(A=t[1].baker.address+"")&&b(_,A),1&e&&L!==(L=t[0]?"-":"+")&&b(B,L),t[0]?O?O.p(t,e):(O=at(t),O.c(),O.m(n,null)):O&&(O.d(1),O=null)},i:t,o:t,d(t){t&&h(n),O&&O.d(),C=!1,S()}}}function gt(t){return t.slice(0,5)+"..."+t.slice(-5)}const pt=({amount:t},{amount:e})=>e-t,mt=({hash:t},{hash:e})=>e>t;function vt(t,e,n){let{block:o}=e,{showBody:s=!1}=e;return t.$$set=t=>{"block"in t&&n(1,o=t.block),"showBody"in t&&n(0,s=t.showBody)},[s,o,()=>n(0,s=!s)]}class $t extends K{constructor(t){super(),J(this,t,vt,ht,r,{block:1,showBody:0})}}function bt(t,e,n){const o=t.slice();return o[1]=e[n],o}function kt(t,e){let n,o,s;return o=new $t({props:{block:e[1]}}),{key:t,first:null,c(){n=p(""),D(o.$$.fragment),this.first=n},m(t,e){f(t,n,e),F(o,t,e),s=!0},p(t,n){e=t;const s={};1&n&&(s.block=e[1]),o.$set(s)},i(t){s||(P(o.$$.fragment,t),s=!0)},o(t){T(o.$$.fragment,t),s=!1},d(t){t&&h(n),G(o,t)}}}function yt(t){let e,n,o,s=[],r=new Map,l=[...t[0]].reverse();const c=t=>t[1].hash;for(let e=0;e<l.length;e+=1){let n=bt(t,l,e),o=c(n);r.set(o,s[e]=kt(o,n))}return{c(){e=m(),n=g("ul");for(let t=0;t<s.length;t+=1)s[t].c();document.title="tzkt blocks",$(n,"class","svelte-1bohe7p")},m(t,r){f(t,e,r),f(t,n,r);for(let t=0;t<s.length;t+=1)s[t].m(n,null);o=!0},p(t,[e]){1&e&&(l=[...t[0]].reverse(),L(),s=H(s,e,c,1,t,l,r,n,U,kt,null,bt),O())},i(t){if(!o){for(let t=0;t<l.length;t+=1)P(s[t]);o=!0}},o(t){for(let t=0;t<s.length;t+=1)T(s[t]);o=!1},d(t){t&&h(e),t&&h(n);for(let t=0;t<s.length;t+=1)s[t].d()}}}function wt(t,e,n){let o;return i(t,Z,(t=>n(0,o=t))),[o]}class xt extends K{constructor(t){super(),J(this,t,wt,yt,r,{})}}function jt(e){let n,s,r,l,c,a,i,u,p;return{c(){n=g("div"),s=g("div"),r=g("p"),r.textContent="404",l=m(),c=g("button"),c.textContent="go to main",a=m(),i=g("button"),i.textContent="2",$(s,"class","empty-page-content"),$(n,"class","empty-page svelte-18iqbj3")},m(t,o){f(t,n,o),d(n,s),d(s,r),d(s,l),d(s,c),d(s,a),d(s,i),u||(p=[v(c,"click",e[1]),v(i,"click",e[2])],u=!0)},p:t,i:t,o:t,d(t){t&&h(n),u=!1,o(p)}}}function _t(t,e,n){let o;i(t,Y,(t=>n(0,o=t))),u(Y,o="#none",o);return[o,()=>u(Y,o="",o),()=>u(Y,o="?a=4",o)]}class Et extends K{constructor(t){super(),J(this,t,_t,jt,r,{})}}function qt(t){let e,n,o,s,r,l,c;o=new lt({props:{height:Bt,routes:t[1]}});var a=t[1][t[0]]||Et;return a&&(l=new a({})),{c(){e=g("scelte:window"),n=m(),D(o.$$.fragment),s=m(),r=g("main"),l&&D(l.$$.fragment),$(r,"class","container svelte-1183rcr"),$(r,"style",`padding-top: ${Bt}`)},m(t,a){f(t,e,a),f(t,n,a),F(o,t,a),f(t,s,a),f(t,r,a),l&&F(l,r,null),c=!0},p(t,[e]){if(a!==(a=t[1][t[0]]||Et)){if(l){L();const t=l;T(t.$$.fragment,1,0,(()=>{G(t,1)})),O()}a?(l=new a({}),D(l.$$.fragment),P(l.$$.fragment,1),F(l,r,null)):l=null}},i(t){c||(P(o.$$.fragment,t),l&&P(l.$$.fragment,t),c=!0)},o(t){T(o.$$.fragment,t),l&&T(l.$$.fragment,t),c=!1},d(t){t&&h(e),t&&h(n),G(o,t),t&&h(s),t&&h(r),l&&G(l)}}}let Bt="60px";function zt(t,e,n){let o;i(t,Y,(t=>n(0,o=t)));return[o,{"#/":xt,"#blocks":xt,"#none":Et}]}return new class extends K{constructor(t){super(),J(this,t,zt,qt,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
